{"ast":null,"code":"import axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\nconst http = axios.create({\n  baseURL: \"https://cnodejs.org/api/v1\"\n}); //获取主题列表数据\n\nfunction useTopicList() {\n  let dispatch = useDispatch(); //定义成一个高阶函数\n\n  return function (tab = \"all\", page = 1, limit = 20, mdrender = true) {\n    http.get(`/topics?tab=${tab}&page=${page}&limit=${limit}&mdrender=${mdrender}`).then(res => {\n      //改变状态,并向仓库里面的data赋值\n      dispatch({\n        type: \"topics_loadingover\",\n        data: res.data.data\n      });\n    });\n  };\n} // 获取主题列表详情\n\n\nfunction useTopic() {\n  let dispatch = useDispatch();\n  return function (id) {\n    http.get(`/topic/${id}`).then(res => {\n      dispatch({\n        type: \"topic_loadingover\",\n        data: res.data.data\n      });\n    }).catch(res => {\n      dispatch({\n        type: \"topic_error\",\n        err_msg: res.response.data.error_msg\n      });\n    });\n  };\n} // 获取用户详情\n\n\nfunction useUser() {\n  let dispatch = useDispatch();\n  return function (loginname) {\n    http.get(`/user/${loginname}`).then(res => {\n      dispatch({\n        type: \"user_loadingover\",\n        data: res.data.data\n      });\n    });\n  };\n}\n\nexport { useTopicList, useTopic, useUser };","map":{"version":3,"sources":["/home/aoshisen/Study/cnode/cnode-hooks/src/store/action/index.js"],"names":["axios","useDispatch","http","create","baseURL","useTopicList","dispatch","tab","page","limit","mdrender","get","then","res","type","data","useTopic","id","catch","err_msg","response","error_msg","useUser","loginname"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,MAAMC,IAAI,GAACF,KAAK,CAACG,MAAN,CAAa;AACpBC,EAAAA,OAAO,EAAC;AADY,CAAb,CAAX,C,CAKA;;AACA,SAASC,YAAT,GAAuB;AAEnB,MAAIC,QAAQ,GAACL,WAAW,EAAxB,CAFmB,CAGnB;;AACA,SAAO,UAASM,GAAG,GAAC,KAAb,EAAmBC,IAAI,GAAC,CAAxB,EAA0BC,KAAK,GAAC,EAAhC,EAAmCC,QAAQ,GAAC,IAA5C,EAAiD;AACpDR,IAAAA,IAAI,CAACS,GAAL,CAAU,eAAcJ,GAAI,SAAQC,IAAK,UAASC,KAAM,aAAYC,QAAS,EAA7E,EAAgFE,IAAhF,CAAqFC,GAAG,IAAE;AAEtF;AACAP,MAAAA,QAAQ,CAAC;AACLQ,QAAAA,IAAI,EAAC,oBADA;AAELC,QAAAA,IAAI,EAACF,GAAG,CAACE,IAAJ,CAASA;AAFT,OAAD,CAAR;AAIH,KAPD;AAQH,GATD;AAUH,C,CACD;;;AACA,SAASC,QAAT,GAAmB;AACf,MAAIV,QAAQ,GAACL,WAAW,EAAxB;AACA,SAAO,UAASgB,EAAT,EAAY;AACff,IAAAA,IAAI,CAACS,GAAL,CAAU,UAASM,EAAG,EAAtB,EAAyBL,IAAzB,CAA8BC,GAAG,IAAE;AAC/BP,MAAAA,QAAQ,CAAC;AACLQ,QAAAA,IAAI,EAAC,mBADA;AAELC,QAAAA,IAAI,EAACF,GAAG,CAACE,IAAJ,CAASA;AAFT,OAAD,CAAR;AAIH,KALD,EAKGG,KALH,CAKUL,GAAD,IAAO;AACZP,MAAAA,QAAQ,CACJ;AACIQ,QAAAA,IAAI,EAAC,aADT;AAEIK,QAAAA,OAAO,EAACN,GAAG,CAACO,QAAJ,CAAaL,IAAb,CAAkBM;AAF9B,OADI,CAAR;AAMH,KAZD;AAaH,GAdD;AAeH,C,CACD;;;AACA,SAASC,OAAT,GAAkB;AACd,MAAIhB,QAAQ,GAACL,WAAW,EAAxB;AACA,SAAO,UAASsB,SAAT,EAAmB;AACtBrB,IAAAA,IAAI,CAACS,GAAL,CAAU,SAAQY,SAAU,EAA5B,EAA+BX,IAA/B,CAAoCC,GAAG,IAAE;AACrCP,MAAAA,QAAQ,CAAC;AACLQ,QAAAA,IAAI,EAAC,kBADA;AAELC,QAAAA,IAAI,EAACF,GAAG,CAACE,IAAJ,CAASA;AAFT,OAAD,CAAR;AAIH,KALD;AAMH,GAPD;AAQH;;AACD,SAAQV,YAAR,EAAqBW,QAArB,EAA8BM,OAA9B","sourcesContent":["import axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\nconst http=axios.create({\n    baseURL:\"https://cnodejs.org/api/v1\"\n})\n\n\n//获取主题列表数据\nfunction useTopicList(){\n\n    let dispatch=useDispatch();\n    //定义成一个高阶函数\n    return function(tab=\"all\",page=1,limit=20,mdrender=true){\n        http.get(`/topics?tab=${tab}&page=${page}&limit=${limit}&mdrender=${mdrender}`).then(res=>{\n\n            //改变状态,并向仓库里面的data赋值\n            dispatch({\n                type:\"topics_loadingover\",\n                data:res.data.data\n            })\n        })\n    }\n}\n// 获取主题列表详情\nfunction useTopic(){\n    let dispatch=useDispatch();\n    return function(id){\n        http.get(`/topic/${id}`).then(res=>{\n            dispatch({\n                type:\"topic_loadingover\",\n                data:res.data.data\n            })\n        }).catch((res)=>{\n            dispatch(\n                {\n                    type:\"topic_error\",\n                    err_msg:res.response.data.error_msg\n                }\n            )\n        })\n    }\n}\n// 获取用户详情\nfunction useUser(){\n    let dispatch=useDispatch();\n    return function(loginname){\n        http.get(`/user/${loginname}`).then(res=>{\n            dispatch({\n                type:\"user_loadingover\",\n                data:res.data.data\n            })\n        })\n    }\n}\nexport {useTopicList,useTopic,useUser}"]},"metadata":{},"sourceType":"module"}